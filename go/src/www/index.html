<!DOCTYPE HTML>
<html xmlns:fb="http://ogp.me/ns/fb#">
    <head>
        <title>Endpoints</title>
        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="css/index.css">
    </head>
    <body>

      <div class="container">

          <nav class="navbar navbar-default" role="navigation">

              <div class="navbar-header">
                  <a class="navbar-brand" href="">Endpoints</a>
                  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-navbar-collapse-1">
                      <span class="sr-only">Toggle navigation</span>
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                  </button>
              </div>

              <div class="collapse navbar-collapse" id="bs-navbar-collapse-1">
                  <ul class="navbar-nav navbar-right nav" id="logindropdown">
                      <li class="dropdown" id="login-menu">
                          <a href="" class="dropdown-toggle" data-toggle="dropdown" id="login">Sign in <b class="caret"></b></a>
                          <ul class="dropdown-menu" role="menu" aria-labelledby="login" style="padding:10px;">
                              <li id="fsigninButton">Facebook</li>
                              <li id="gsigninButton" style="margin-top:5px;">Google</li>
                          </ul>
                      </li>
                  </ul>
              </div>

          </nav>

          <ul style="padding-top:10px;">
              <li><a href="_ah/api/explorer">Web Interface</a></li>
              <li><a href="https://play.google.com/store/apps/details?id=my.endpoints">Android Client</a></li>
              <!--li><a href="https://play.google.com/apps/testing/com.appspot">Android release apk</a></li>
              <li><a href="https://lb1.pcs.ovh.net/v1/AUTH_a4c2ef109c996858a5c3f8e411de8538/gcl-13/TrivialDrive.apk">Android debug apk</a></li-->
              <li><a href="https://github.com/gertcuykens/gcl-11">Source Code</a></li>
          </ul>

          <div id="outputLog"></div>

          <form action="javascript:void(0);">
              <h2>Get Greeting</h2>
              <div><span style="width: 90px; display: inline-block;">Greeting ID: </span><input id="id" value="0"/></div>
              <div><input id="getGreeting" type="submit" class="btn btn-small" value="Submit"/></div>
          </form>

          <form action="javascript:void(0);">
              <h2>List Greetings</h2>
              <div><input id="listGreeting" type="submit" class="btn btn-small" value="Submit"/></div>
          </form>

          <form action="javascript:void(0);">
              <h2>Multiply Greetings</h2>
              <div><span style="width: 90px; display: inline-block;">Greeting: </span><input id="greeting" value="hello "/></div>
              <div><span style="width: 90px; display: inline-block;">Count: </span><input id="count" value="2"/> </div>
              <div><input id="multiplyGreetings" type="submit" class="btn btn-small" value="Submit"/></div>
          </form>

          <form action="javascript:void(0);">
              <h2>Authenticated Greeting</h2>
              <div><input id="authedGreeting" type="submit" class="btn btn-small" value="Submit"/></div>
          </form>

          <form action="javascript:void(0);">
              <h2>Soap</h2>
              <div><input id="soap" type="submit" class="btn btn-small" value="Submit"/></div>
          </form>

          <form action="javascript:void(0);">
              <h2>Datastore</h2>
              <div><input id="datastore" type="submit" class="btn btn-small" value="Submit"/></div>
          </form>

      </div>

      <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
      <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
      <script type="text/javascript" src="./js/token.js"></script>
      <script type="text/javascript" src="./js/facebook.js"></script>
      <script type="text/javascript" src="./js/google.js"></script>
      <script>
          $('#logindropdown').on('hidden.bs.dropdown', function () {border()})
          $('#logindropdown').on('shown.bs.dropdown', function () {border()})

          border = function(){
              var b=document.getElementById('login')
              //if (document.getElementById('login-menu').classList.contains('open')){b.style.borderBottom='1px solid transparent'; return}
              if (Google.access_token) {b.style.borderBottom='1px solid #dd4b39'; return}
              if (Facebook.access_token) {b.style.borderBottom='1px solid #5f78ab'; return}
              b.style.borderBottom='1px solid transparent'
          }
      </script>
      <script type="text/javascript" src="./js/endpoints.js"></script>

      <div id="fb-root"></div>

    </body>
</html>

<!--
function signout() {
    var http=new XMLHttpRequest();
    http.open('GET','https://accounts.google.com/o/oauth2/revoke?token='+gapi.auth.getToken().access_token,true)
    http.send();
    http.onreadystatechange=function(){ if (http.readyState!=4 && http.status!=200) return false
                                        var b=document.getElementById('signinButton')
                                        b.removeEventListener('click', signout);
                                        b.addEventListener('click',signin)
                                        document.getElementsByClassName("buttonText")[0].innerHTML="Log In"}
}

FB.init({appId:'...', status:true, cookie:true, xfbml:true});
var c=b.cloneNode(true);
var p=b.parentNode
p.replaceChild(c,b);

//Server=new Token()
//Server.type_token="server"

function testAPI3() {
console.log('Server, Register Facebook user... ');
gapi.client.rest.register(Facebook).execute(function(response){console.log('Server, '+JSON.stringify(response.result));Server=response.result})

console.log('Server, Register Google user... ');
gapi.client.rest.register(Google).execute(function(response){console.log('Server, '+JSON.stringify(response.result));Server=response.result})
}

function testAPI4() {
console.log('Server, CheckSum Facebook token... ');
gapi.client.rest.checksum(Server).execute(function(response){console.log('Server, '+JSON.stringify(response.result));Server=response.result})
}

<li class="login">
    <fb:login-button autologoutlink="true" size="large" show-faces="false" max-rows="1"></fb:login-button>
</li>

<li class="login">
    <div  id="fSignInWrapper">
        <span class="label"></span>
        <div id="fsigninButton" >
            <span class="ficon"></span>
            <span class="buttonText">Log In</span>
        </div>
    </div>
</li>

<li class="login">
    <div id="gSignInWrapper">
        <span class="label"></span>
        <div id="gsigninButton" >
            <span class="gicon"></span>
            <span class="buttonText">Log In</span>
        </div>
    </div>
</li>

-->
